# ğŸ¯ ç»Ÿä¸€å¹¿å‘Šç®¡ç†ç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç¬¦åˆå¾®ä¿¡å°æ¸¸æˆè§„èŒƒçš„ç»Ÿä¸€å¹¿å‘Šç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘é˜¶æ®µçš„æ¨¡æ‹Ÿå¹¿å‘Šå’Œä¸Šçº¿åçš„çœŸå®å¹¿å‘Šï¼Œä¸šåŠ¡å±‚æ— éœ€å…³å¿ƒå†…éƒ¨å®ç°ç»†èŠ‚ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
ä¸šåŠ¡å±‚ (GameUI)
    â†“ è°ƒç”¨ç»Ÿä¸€æ¥å£
å¹¿å‘Šç®¡ç†å™¨ (AdManager)
    â†“ æ ¹æ®ç¯å¢ƒé€‰æ‹©
æ¨¡æ‹Ÿå¹¿å‘Š (FakeRewardedAd) â†â†’ å¾®ä¿¡å¹¿å‘Š (WxRewardedAd)
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
ads/
â”œâ”€â”€ IRewardedAd.ts      # å¹¿å‘Šæ¥å£å®šä¹‰
â”œâ”€â”€ AdManager.ts        # å¹¿å‘Šç®¡ç†å™¨ï¼ˆå•ä¾‹ï¼‰
â”œâ”€â”€ FakeRewardedAd.ts   # æ¨¡æ‹Ÿå¹¿å‘Šå®ç°ï¼ˆæ”¯æŒè‡ªå®šä¹‰UIï¼‰
â”œâ”€â”€ WxRewardedAd.ts     # å¾®ä¿¡å¹¿å‘Šå®ç°
â”œâ”€â”€ AdUsageExample.ts   # ä½¿ç”¨ç¤ºä¾‹
â””â”€â”€ README.md           # ä½¿ç”¨è¯´æ˜

resources/
â””â”€â”€ images/
    â””â”€â”€ ads/
        â”œâ”€â”€ ad_ui.jpg      # æ¨¡æ‹Ÿå¹¿å‘Šç•Œé¢å›¾ç‰‡
        â””â”€â”€ ad_ui.jpg.meta # Cocos Creator èµ„æºé…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–ï¼ˆå·²åœ¨ App.ts ä¸­å®Œæˆï¼‰

```typescript
import { adManager } from './ads/AdManager';

// åœ¨ App.onInit() ä¸­åˆå§‹åŒ–
const adConfig = {
    adUnitId: "adunit-xxxxxxxxxx", // ğŸš¨ ä¸Šçº¿å‰å¡«å…¥çœŸå®å¹¿å‘Šä½ID
    mockDuration: 15,              // æ¨¡æ‹Ÿå¹¿å‘Šæ—¶é•¿
    mockSkipDelay: 5,              // 5ç§’åå…è®¸è·³è¿‡
    enableDebugLog: true           // å¼€å¯è°ƒè¯•æ—¥å¿—
};

const isDevelopment = true; // ğŸš¨ å¼€å‘é˜¶æ®µä¸º trueï¼Œä¸Šçº¿åæ”¹ä¸º false
adManager.init(adConfig, isDevelopment);
```

### 2. ä¸šåŠ¡å±‚è°ƒç”¨

```typescript
import { adManager } from '../ads/AdManager';

class GameUI {
    async onWatchAdButtonClicked(): Promise<void> {
        // ç»Ÿä¸€çš„å¹¿å‘Šè°ƒç”¨æ¥å£
        const result = await adManager.showRewardedAd();
        
        switch (result) {
            case 'completed':
                // å¹¿å‘Šæ’­æ”¾å®Œæˆï¼Œç»™å¥–åŠ±
                this.grantReward();
                break;
            case 'aborted':
                // ç”¨æˆ·ä¸­é€”å…³é—­ï¼Œä¸ç»™å¥–åŠ±
                this.showMessage('è§‚çœ‹æœªå®Œæˆ');
                break;
            case 'error':
                // å¹¿å‘Šæ’­æ”¾å¤±è´¥
                this.showMessage('å¹¿å‘Šæš‚ä¸å¯ç”¨');
                break;
        }
    }
}
```

## ğŸ“± å¼€å‘ä¸ä¸Šçº¿åˆ‡æ¢

### å¼€å‘é˜¶æ®µ
```typescript
// ä½¿ç”¨æ¨¡æ‹Ÿå¹¿å‘Š
adManager.init(config, true);
```

**ç‰¹ç‚¹ï¼š**
- âœ… å®Œæ•´çš„å¹¿å‘ŠUIç•Œé¢ï¼ˆä½¿ç”¨è‡ªå®šä¹‰å¹¿å‘Šå›¾ç‰‡ï¼‰
- âœ… 15ç§’å€’è®¡æ—¶æ¨¡æ‹Ÿæ’­æ”¾
- âœ… 5ç§’åæ˜¾ç¤ºè·³è¿‡æŒ‰é’®
- âœ… å¯è§†åŒ–è¿›åº¦æ¡æ˜¾ç¤º
- âœ… åŠé€æ˜èƒŒæ™¯é®ç½©
- âœ… è°ƒè¯•æ—¥å¿—

### ä¸Šçº¿é˜¶æ®µ
```typescript
// åˆ‡æ¢åˆ°çœŸå®å¹¿å‘Šï¼ˆåªéœ€æ”¹ä¸€è¡Œä»£ç ï¼ï¼‰
adManager.init({
    adUnitId: "adunit-çœŸå®å¹¿å‘Šä½ID", // ğŸš¨ å¡«å…¥çœŸå®ID
    enableDebugLog: false
}, false);
```

**ç‰¹ç‚¹ï¼š**
- âœ… è°ƒç”¨å¾®ä¿¡å®˜æ–¹ `wx.createRewardedVideoAd`
- âœ… è‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… ç›¸åŒçš„è¿”å›å€¼æ ¼å¼

## ğŸ® å½“å‰æ¸¸æˆä¸­çš„åº”ç”¨

å·²ç»åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä½¿ç”¨æ–°çš„å¹¿å‘Šç³»ç»Ÿï¼š

### 1. é“å…·è·å–ï¼ˆgameViewCmpt.tsï¼‰
```typescript
// ç‚¹å‡»è·å–é“å…·æŒ‰é’®
private async watchAdForTool(toolType: number, toolName: string): Promise<void> {
    const result = await adManager.showRewardedAd();
    
    if (result === 'completed') {
        GlobalFuncHelper.setBomb(toolType, 1);
        App.event.emit(EventName.Game.ToolCountRefresh);
        App.view.showMsgTips(`ğŸ‰ è·å¾— ${toolName} x1ï¼`);
    }
}
```

### 2. å¯æ‰©å±•åˆ°å…¶ä»–åœºæ™¯
- å¤æ´»åŠŸèƒ½
- é¢å¤–æ­¥æ•°
- é‡‘å¸è·å–
- ç‰¹æ®Šå¥–åŠ±

## ğŸ”§ é…ç½®å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ | å¼€å‘å€¼ | ç”Ÿäº§å€¼ |
|------|------|------|--------|--------|
| `adUnitId` | string | å¾®ä¿¡å¹¿å‘Šä½ID | å¯é€‰ | å¿…éœ€ |
| `mockDuration` | number | æ¨¡æ‹Ÿå¹¿å‘Šæ—¶é•¿ï¼ˆç§’ï¼‰ | 15 | - |
| `mockSkipDelay` | number | è·³è¿‡å»¶è¿Ÿï¼ˆç§’ï¼‰ | 5 | - |
| `enableDebugLog` | boolean | è°ƒè¯•æ—¥å¿— | true | false |

## ğŸ“Š å¹¿å‘Šç»“æœç±»å‹

```typescript
type AdResult = 'completed' | 'aborted' | 'error';
```

- **`completed`**: å¹¿å‘Šæ’­æ”¾å®Œæˆï¼Œåº”ç»™å¥–åŠ±
- **`aborted`**: ç”¨æˆ·ä¸­é€”å…³é—­ï¼Œä¸ç»™å¥–åŠ±  
- **`error`**: å¹¿å‘ŠåŠ è½½/æ’­æ”¾å¤±è´¥

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

ç³»ç»ŸåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

1. **é‡å¤è°ƒç”¨ä¿æŠ¤** - é˜²æ­¢åŒæ—¶æ’­æ”¾å¤šä¸ªå¹¿å‘Š
2. **è‡ªåŠ¨é‡è¯•æœºåˆ¶** - å¾®ä¿¡å¹¿å‘Šå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
3. **é™çº§å¤„ç†** - çœŸå®å¹¿å‘Šå¤±è´¥æ—¶å›é€€åˆ°æ¨¡æ‹Ÿå¹¿å‘Š
4. **èµ„æºæ¸…ç†** - è‡ªåŠ¨æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’Œå¹¿å‘Šå®ä¾‹

## ğŸ¯ ä¼˜åŠ¿

### âœ… ç¬¦åˆå¾®ä¿¡è§„èŒƒ
- ç‚¹å‡»ç›´æ¥æ’­æ”¾å¹¿å‘Šï¼Œæ— äºŒæ¬¡ç¡®è®¤å¼¹çª—
- ç»Ÿä¸€çš„è°ƒç”¨æ–¹å¼å’Œå›è°ƒå¤„ç†

### âœ… å¼€å‘å‹å¥½
- æ¨¡æ‹Ÿå¹¿å‘Šæä¾›å®Œæ•´çš„å¼€å‘ä½“éªŒ
- ä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯å’ŒçŠ¶æ€æç¤º

### âœ… ä¸Šçº¿ç®€å•
- åªéœ€ä¿®æ”¹ä¸€ä¸ªé…ç½®å‚æ•°
- ä¸šåŠ¡é€»è¾‘å®Œå…¨ä¸ç”¨æ”¹åŠ¨

### âœ… å¯ç»´æŠ¤æ€§å¼º
- ç»Ÿä¸€çš„æ¥å£è®¾è®¡
- å•ä¾‹æ¨¡å¼ï¼Œå…¨å±€å¯ç”¨
- å®Œæ•´çš„ç±»å‹å®šä¹‰

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»æ—§çš„ Advertise ç³»ç»Ÿè¿ç§»ï¼š

**æ—§ä»£ç ï¼š**
```typescript
Advertise.showVideoAds((success: boolean) => {
    if (success) {
        // ç»™å¥–åŠ±
    }
});
```

**æ–°ä»£ç ï¼š**
```typescript
const result = await adManager.showRewardedAd();
if (result === 'completed') {
    // ç»™å¥–åŠ±
}
```

## ğŸš¨ ä¸Šçº¿å‰æ£€æŸ¥æ¸…å•

- [ ] ä¿®æ”¹ `isDevelopment = false`
- [ ] å¡«å…¥çœŸå®çš„ `adUnitId`  
- [ ] è®¾ç½® `enableDebugLog = false`
- [ ] æµ‹è¯•çœŸå®å¹¿å‘ŠåŠŸèƒ½
- [ ] éªŒè¯å¥–åŠ±å‘æ”¾é€»è¾‘

## ğŸ†˜ å¸¸è§é—®é¢˜

**Q: å¹¿å‘Šä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ**  
A: æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤å¹¿å‘Šç®¡ç†å™¨æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–ã€‚

**Q: å¦‚ä½•åˆ‡æ¢å¹¿å‘Šæ¨¡å¼ï¼Ÿ**  
A: è°ƒç”¨ `adManager.switchAdMode(true/false)` æˆ–é‡æ–°åˆå§‹åŒ–ã€‚

**Q: å¯ä»¥åŒæ—¶æ’­æ”¾å¤šä¸ªå¹¿å‘Šå—ï¼Ÿ**  
A: ä¸å¯ä»¥ï¼Œç³»ç»Ÿæœ‰é˜²é‡å¤è°ƒç”¨ä¿æŠ¤æœºåˆ¶ã€‚

**Q: æ¨¡æ‹Ÿå¹¿å‘Šå’ŒçœŸå®å¹¿å‘Šçš„è¡Œä¸ºä¸€è‡´å—ï¼Ÿ**  
A: æ˜¯çš„ï¼Œè¿”å›å€¼å’Œè°ƒç”¨æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯æ’­æ”¾ä½“éªŒä¸åŒã€‚

**Q: å¦‚ä½•æ›´æ¢æ¨¡æ‹Ÿå¹¿å‘Šçš„UIå›¾ç‰‡ï¼Ÿ**  
A: å°†æ–°çš„å›¾ç‰‡æ”¾åœ¨ `assets/resources/images/ads/` ç›®å½•ä¸‹ï¼Œå‘½åä¸º `ad_ui.jpg`ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½ã€‚

**Q: æ¨¡æ‹Ÿå¹¿å‘Šç•Œé¢åŒ…å«å“ªäº›å…ƒç´ ï¼Ÿ**  
A: 
- åŠé€æ˜é»‘è‰²èƒŒæ™¯é®ç½©
- è‡ªå®šä¹‰å¹¿å‘Šå›¾ç‰‡ï¼ˆ350x200åƒç´ ï¼‰
- å€’è®¡æ—¶æ–‡å­—æ˜¾ç¤º
- ç»¿è‰²è¿›åº¦æ¡
- è·³è¿‡æŒ‰é’®ï¼ˆ5ç§’åæ˜¾ç¤ºï¼‰